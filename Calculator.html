<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Karen Calculator</title>

<!-- PWA -->
<link rel="manifest" href="https://raw.githubusercontent.com/karenliteracy/Reference-Files/main/manifest.json">


<meta name="theme-color" content="#000000">
<link rel="apple-touch-icon" href="http://images.wikia.com/logopedia/images/d/d8/Logo_logo.svg">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<style>
:root{
  --bg:#000;
  --btn:#333;
  --btn-func:#a5a5a5;
  --btn-op:#ff9f0a;
  --text:#fff;
}
*{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;}
body{margin:0;background:#fff;color:#000;display:flex;justify-content:center;}
.app{width:100%;max-width:390px;min-height:100vh;background:#fff;}
.topbar{display:flex;gap:6px;padding:10px;}
.topbar button{flex:1;border:none;border-radius:14px;height:38px;background:#1c1c1e;color:#fff;font-size:.9rem;}
.display{text-align:right;font-size:3.2rem;padding:30px 16px 10px;min-height:96px;}
.keys{display:grid;grid-template-columns:repeat(4,1fr);gap:12px;padding:12px;}
.key{border:none;border-radius:50%;height:72px;font-size:1.6rem;background:var(--btn);color:#fff;}
.key:active{filter:brightness(1.25);} 
.func{background:var(--btn-func);color:#000;font-weight:600;}
.op{background:var(--btn-op);} 
.zero{grid-column:span 2;border-radius:36px;text-align:left;padding-left:30px;}
.converter{display:none;padding:12px;}
.converter select,.converter input{width:100%;padding:14px;margin-bottom:10px;border-radius:14px;border:none;background:#1c1c1e;color:#fff;}
.category{display:flex;gap:6px;margin-bottom:10px;}
.category button{flex:1;border:none;border-radius:12px;height:34px;background:#2c2c2e;color:#fff;font-size:.85rem;}
.scientific{display:none;grid-template-columns:repeat(4,1fr);gap:12px;padding:12px;}
</style>
</head>
<body>
<div class="app">
  <div class="topbar">
    <button onclick="setMode('calc')">Calculator</button>
    <button onclick="setMode('sci')">Scientific</button>
    <button onclick="setMode('convert')">Convert</button>
    <button onclick="toggleLang()" id="langBtn">Karen</button>
  </div>

  <div class="display" id="display">၀</div>

  <!-- Converter -->
  <div class="converter" id="converter">
    <div class="category">
      <button onclick="setCategory('length')">Length</button>
      <button onclick="setCategory('weight')">Weight</button>
      <button onclick="setCategory('temp')">Temp</button>
      <button onclick="setCategory('time')">Time</button>
    </div>
    <select id="fromUnit"></select>
    <select id="toUnit"></select>
    <input id="unitInput" inputmode="numeric" placeholder="Enter value" oninput="handleUnitInput(this)" />
  </div>

  <!-- Calculator -->
  <div class="keys" id="keys"></div>

  <!-- Scientific -->
  <div class="scientific" id="sciKeys"></div>
</div>

<script>
// Burmese digits
const burmese=['၀','၁','၂','၃','၄','၅','၆','၇','၈','၉'];
const toB=s=>s.toString().replace(/\d/g,d=>burmese[d]);
const toE=s=>s.replace(/[၀-၉]/g,d=>burmese.indexOf(d));

let mode='calc',current='0',op=null,stored=null,mem=0,lang='en',category='length';

const units={
 length:{m:1,ft:0.3048,in:0.0254,km:1000,mi:1609.34},
 weight:{kg:1,lb:0.453592},
 time:{sec:1,min:60,hr:3600,day:86400},
 temp:{c:'c',f:'f'}
};

function vibrate(){navigator.vibrate?.(10);}

function setMode(m){mode=m;document.getElementById('converter').style.display=m==='convert'?'block':'none';document.getElementById('sciKeys').style.display=m==='sci'?'grid':'none';render();}

function press(v){vibrate();
 if(/[0-9]/.test(v)) current=current==='0'?v:current+v;
 else if(['+','-','*','/'].includes(v)){stored=parseFloat(current);op=v;current='0';}
 else if(v==='='){if(op){current=eval(stored+op+current).toString();op=null;}}
 update();
}

function update(){document.getElementById('display').textContent=toB(current);}

function handleKey(v){vibrate();
 if(v==='AC'){current='0';stored=null;op=null;}
 else if(v==='MC'){mem=0;}
 else if(v==='MR'){current=mem.toString();}
 else if(v==='M+'){mem+=parseFloat(current)||0;}
 else if(v==='M-'){mem-=parseFloat(current)||0;}
 else if(v==='sin'){current=Math.sin(parseFloat(current)).toString();}
 else if(v==='cos'){current=Math.cos(parseFloat(current)).toString();}
 else if(v==='√'){current=Math.sqrt(parseFloat(current)).toString();}
 else if(v==='π'){current=Math.PI.toString();}
 else press(v);
 update();
}

function render(){
 const k=document.getElementById('keys');k.innerHTML='';
 const s=document.getElementById('sciKeys');s.innerHTML='';
 if(mode==='calc'){
 ['MC','MR','M+','M-','AC','%','/','*','7','8','9','-','4','5','6','+','1','2','3','=','0','.'].forEach(v=>{
  const b=document.createElement('button');b.className='key';
  b.textContent=/\d/.test(v)?toB(v):v;
  if(v==='0') b.classList.add('zero');
  if(['+','-','*','/','='].includes(v)) b.classList.add('op');
  if(['AC','MC','MR','M+','M-','%'].includes(v)) b.classList.add('func');
  b.onclick=()=>handleKey(v);k.appendChild(b);
 });
 }
 if(mode==='sci'){
 ['sin','cos','√','π'].forEach(v=>{
  const b=document.createElement('button');b.className='key';b.textContent=v;b.onclick=()=>handleKey(v);s.appendChild(b);
 });
 }
}

function toggleLang(){lang=lang==='en'?'karen':'en';document.getElementById('langBtn').textContent=lang==='en'?'Karen':'English';}

function setCategory(c){category=c;loadUnits();convert();}
function loadUnits(){const f=document.getElementById('fromUnit'),t=document.getElementById('toUnit');f.innerHTML=t.innerHTML='';Object.keys(units[category]).forEach(u=>{f.innerHTML+=`<option value="${u}">${u}</option>`;t.innerHTML+=`<option value="${u}">${u}</option>`;});}

function handleUnitInput(el){el.value=toB(toE(el.value));convert();}

function convert(){const raw=toE(document.getElementById('unitInput').value||'0');const v=parseFloat(raw)||0;const f=document.getElementById('fromUnit').value;const t=document.getElementById('toUnit').value;let r=0;if(category==='temp'){r=f==='c'&&t==='f'?v*9/5+32:f==='f'&&t==='c'?(v-32)*5/9:v;}else{r=v*(units[category][f]/units[category][t]);}document.getElementById('display').textContent=toB(r.toFixed(3));}

// Keyboard support
document.addEventListener('keydown',e=>{if(e.key>='0'&&e.key<='9')handleKey(e.key);if(['+','-','*','/','Enter','=','.'].includes(e.key))handleKey(e.key==='Enter'?'=':e.key);if(e.key==='Backspace'){current=current.slice(0,-1)||'0';update();}});

// Swipe delete
document.querySelector('.display').addEventListener('touchend',e=>{if(e.changedTouches[0].clientX<100){current=current.slice(0,-1)||'0';update();}});

loadUnits();render();update();
</script>
</body>
</html>
